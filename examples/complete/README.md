# Example - Complete

In this example, no base proxy is generated by default. Instead, we explicitly create a base proxy for only the POST method. We also, expand ANY to all other HTTP methods, but the explicitly given POST method configuration supersedes the generated POST expansion.

## ANY Expansion

_note_: This is usually not necessary.

The reason we allow the expansion of ANY to each HTTP method is based on how authorizers are handled. When a request is passed to a custom authorizer part of the request is the method requested. If your custom authorizer has logic built against the HTTP method, you may need to know which. In those cases, use `expand_any`.

## The resulting outputs are:

### resources

``` hcl
resources = {
  "0|v1" = {
    depth      = 0
    parent_key = null
    path_part  = "v1"
  }
  "1|v1/{proxy+}" = {
    depth      = 1
    parent_key = "0|v1"
    path_part  = "{proxy+}"
  }
}
```

### methods

``` hcl
methods = {
  "0|v1|POST" = {
    config = {
      "attr_a" = "only base proxy POST"
      "uri"    = "example.com/v1"
    }
    depth        = 0
    key          = "0|v1|POST"
    method       = "POST"
    resource_key = "0|v1"
    root         = false
  }
  "1|v1/{proxy+}|DELETE" = {
    config = {
      "attr_a" = "applies to all expanded"
      "uri"    = "example.com/v1/{proxy}"
    }
    depth        = 1
    key          = "1|v1/{proxy+}|DELETE"
    method       = "DELETE"
    resource_key = "1|v1/{proxy+}"
    root         = false
  }
  "1|v1/{proxy+}|GET" = {
    config = {
      "attr_a" = "more explicit than expanded ANY"
    }
    depth        = 1
    key          = "1|v1/{proxy+}|GET"
    method       = "GET"
    resource_key = "1|v1/{proxy+}"
    root         = false
  }
  "1|v1/{proxy+}|HEAD" = {
    config = {
      "attr_a" = "applies to all expanded"
      "uri"    = "example.com/v1/{proxy}"
    }
    depth        = 1
    key          = "1|v1/{proxy+}|HEAD"
    method       = "HEAD"
    resource_key = "1|v1/{proxy+}"
    root         = false
  }
  "1|v1/{proxy+}|OPTIONS" = {
    config = {
      "attr_a" = "applies to all expanded"
      "uri"    = "example.com/v1/{proxy}"
    }
    depth        = 1
    key          = "1|v1/{proxy+}|OPTIONS"
    method       = "OPTIONS"
    resource_key = "1|v1/{proxy+}"
    root         = false
  }
  "1|v1/{proxy+}|PATCH" = {
    config = {
      "attr_a" = "applies to all expanded"
      "uri"    = "example.com/v1/{proxy}"
    }
    depth        = 1
    key          = "1|v1/{proxy+}|PATCH"
    method       = "PATCH"
    resource_key = "1|v1/{proxy+}"
    root         = false
  }
  "1|v1/{proxy+}|POST" = {
    config = {
      "attr_a" = "applies to all expanded"
      "uri"    = "example.com/v1/{proxy}"
    }
    depth        = 1
    key          = "1|v1/{proxy+}|POST"
    method       = "POST"
    resource_key = "1|v1/{proxy+}"
    root         = false
  }
  "1|v1/{proxy+}|PUT" = {
    config = {
      "attr_a" = "applies to all expanded"
      "uri"    = "example.com/v1/{proxy}"
    }
    depth        = 1
    key          = "1|v1/{proxy+}|PUT"
    method       = "PUT"
    resource_key = "1|v1/{proxy+}"
    root         = false
  }
}
```
